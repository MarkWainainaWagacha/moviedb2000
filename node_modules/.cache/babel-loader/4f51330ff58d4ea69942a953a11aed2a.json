{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\ReactMovieDB-master\\\\src\\\\components\\\\Home\\\\Home.js\";\nimport React, { Component } from 'react';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE } from '../../config';\nimport HeroImage from '../elements/HeroImage/HeroImage';\nimport SearchBar from '../elements/SearchBar/SearchBar';\nimport FourColGrid from '../elements/FourColGrid/FourColGrid';\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\nimport Spinner from '../elements/Spinner/Spinner';\nimport './Home.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: [],\n      heroImage: null,\n      loading: false,\n      currentPage: 0,\n      totalPages: 0,\n      searchTerm: ''\n    };\n    this.searchItems = searchTerm => {\n      let endpoint = '';\n      this.setState({\n        movies: [],\n        loading: true,\n        searchTerm\n      });\n      if (searchTerm === '') {\n        endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n      } else {\n        endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${searchTerm}`;\n      }\n      this.fetchItems(endpoint);\n    };\n    this.loadMoreItems = () => {\n      let endpoint = '';\n      this.setState({\n        loading: true\n      });\n      if (this.state.searchTerm === '') {\n        endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this.state.currentPage + 1}`;\n      } else {\n        endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${this.state.searchTerm}&page=${this.state.currentPage + 1}`;\n      }\n      this.fetchItems(endpoint);\n    };\n    this.fetchItems = endpoint => {\n      fetch(endpoint).then(result => result.json()).then(result => {\n        this.setState({\n          movies: [...this.state.movies, ...result.results],\n          heroImage: this.state.heroImage || result.results[0],\n          loading: false,\n          currentPage: result.page,\n          totalPages: result.total_pages\n        }, () => {\n          if (this.state.searchTerm === \"\") {\n            localStorage.setItem('HomeState', JSON.stringify(this.state));\n          }\n        });\n      }).catch(error => console.error('Error:', error));\n    };\n  }\n  componentDidMount() {\n    if (localStorage.getItem('HomeState')) {\n      const state = JSON.parse(localStorage.getItem('HomeState'));\n      this.setState({\n        ...state\n      });\n    } else {\n      this.setState({\n        loading: true\n      });\n      const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n      this.fetchItems(endpoint);\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rmdb-home\",\n      children: [this.state.heroImage ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(HeroImage, {\n          image: `${IMAGE_BASE_URL}${BACKDROP_SIZE}${this.state.heroImage.backdrop_path}`,\n          title: this.state.heroImage.original_title,\n          text: this.state.heroImage.overview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n          callback: this.searchItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rmdb-home-grid\",\n        children: [/*#__PURE__*/_jsxDEV(FourColGrid, {\n          header: this.state.searchTerm ? 'Search Result' : 'Popular Movies',\n          loading: this.state.loading,\n          children: this.state.movies.map((element, i) => {\n            return /*#__PURE__*/_jsxDEV(MovieThumb, {\n              clickable: true,\n              image: element.poster_path ? `${IMAGE_BASE_URL}${POSTER_SIZE}${element.poster_path}` : './images/no_image.jpg',\n              movieId: element.id,\n              movieName: element.original_title\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 34\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 23\n        }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 45\n        }, this) : null, this.state.currentPage <= this.state.totalPages && !this.state.loading ? /*#__PURE__*/_jsxDEV(LoadMoreBtn, {\n          text: \"Load More\",\n          onClick: this.loadMoreItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 23\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 14\n    }, this);\n  }\n}\nexport default Home;","map":{"version":3,"names":["React","Component","API_URL","API_KEY","IMAGE_BASE_URL","POSTER_SIZE","BACKDROP_SIZE","HeroImage","SearchBar","FourColGrid","MovieThumb","LoadMoreBtn","Spinner","jsxDEV","_jsxDEV","Home","constructor","args","state","movies","heroImage","loading","currentPage","totalPages","searchTerm","searchItems","endpoint","setState","fetchItems","loadMoreItems","fetch","then","result","json","results","page","total_pages","localStorage","setItem","JSON","stringify","catch","error","console","componentDidMount","getItem","parse","render","className","children","image","backdrop_path","title","original_title","text","overview","fileName","_jsxFileName","lineNumber","columnNumber","callback","header","map","element","i","clickable","poster_path","movieId","id","movieName","onClick"],"sources":["C:/Users/Admin/Desktop/ReactMovieDB-master/src/components/Home/Home.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { API_URL, API_KEY, IMAGE_BASE_URL,POSTER_SIZE, BACKDROP_SIZE } from '../../config';\nimport HeroImage from '../elements/HeroImage/HeroImage';\nimport SearchBar from '../elements/SearchBar/SearchBar';\nimport FourColGrid from '../elements/FourColGrid/FourColGrid';\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\nimport Spinner from '../elements/Spinner/Spinner';\nimport './Home.css';\n\nclass Home extends Component {\nstate = {\n    movies: [],\n    heroImage: null,\n    loading: false,\n    currentPage: 0,\n    totalPages: 0,\n    searchTerm: ''\n    }\n\ncomponentDidMount(){\n    if (localStorage.getItem('HomeState')) {\n        const state = JSON.parse(localStorage.getItem('HomeState'));\n        this.setState({ ...state});\n    } else {\n    this.setState({ loading: true });\n    const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n    this.fetchItems(endpoint);\n    }\n}\n\nsearchItems = (searchTerm) => {\nlet endpoint = '';\nthis.setState({\n    movies: [],\n    loading: true,\n    searchTerm\n})\n\n    if(searchTerm  === ''){\n        endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n    } else {\n        endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${searchTerm}`;\n    }\n    this.fetchItems(endpoint);\n}\n\nloadMoreItems = () => {\n    let endpoint = '';\n    this.setState({ loading: true });\n\n    if(this.state.searchTerm === ''){\n        endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this.state.currentPage + 1}`;\n    } else {\n        endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${this.state.searchTerm}&page=${this.state.currentPage + 1}`;\n    }\n    this.fetchItems(endpoint);\n}\n\nfetchItems = (endpoint) => {\n    fetch(endpoint)\n    .then(result => result.json())\n    .then(result => {\n        this.setState({\n            movies: [...this.state.movies, ...result.results],\n            heroImage: this.state.heroImage || result.results[0],\n            loading: false,\n            currentPage: result.page,\n            totalPages: result.total_pages\n        }, ()=> {\n            if(this.state.searchTerm === \"\"){\n            localStorage.setItem('HomeState', JSON.stringify(this.state));\n            }\n        })\n    })\n    .catch(error => console.error('Error:', error))\n}\n\n    render() {\n         return (\n             <div className=\"rmdb-home\">\n             {this.state.heroImage ?\n                <div>\n                        <HeroImage\n                         image={`${IMAGE_BASE_URL}${BACKDROP_SIZE}${this.state.heroImage.backdrop_path}`}\n                         title={this.state.heroImage.original_title}\n                         text={this.state.heroImage.overview}\n                         />\n                     <SearchBar callback={this.searchItems} />\n                    </div> : null}\n                    <div className=\"rmdb-home-grid\">\n                      <FourColGrid\n                      header={this.state.searchTerm ? 'Search Result' : 'Popular Movies'}\n                      loading={this.state.loading}\n                      >\n                      {this.state.movies.map ( (element, i) => {\n                          return <MovieThumb\n                                  key={i}\n                                  clickable={true}\n                                  image={element.poster_path ? `${IMAGE_BASE_URL}${POSTER_SIZE}${element.poster_path}` : './images/no_image.jpg'}\n                                  movieId={element.id}\n                                  movieName={element.original_title}\n                                  />\n                                })}           \n                      </FourColGrid>\n                      {this.state.loading ? <Spinner /> : null}\n                      {(this.state.currentPage <= this.state.totalPages && !this.state.loading) ?\n                      <LoadMoreBtn text=\"Load More\" onClick={this.loadMoreItems} />\n                      : null }\n                    </div>\n                </div>\n        )\n    }\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}